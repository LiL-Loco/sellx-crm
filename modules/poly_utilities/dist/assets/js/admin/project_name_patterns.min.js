(()=>{function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function _iterableToArrayLimit(e,t){var a,n,i,o,r,l,u,s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){r=[],l=!0,u=!1;try{if(i=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(a=i.call(s)).done)&&(r.push(a.value),r.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(u)throw n}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}window.addEventListener("load",(function(){!function(e){"use strict";var t=Vue,a=t.createApp,n=t.ref,i=t.watch,o=t.onMounted,r=t.nextTick,l=a({setup:function setup(){function initData(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Promise.all([fetchDataProjectsNameTemplate(h.value,P.value)]).then((function(e){var t,a=_slicedToArray(e,1)[0];d.value=a.data,_.value=a.total_pages,g.value=a.data_info})).catch((function(e){})).finally((function(){m.value=!1,p.value=!0}))}function validationForm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#poly_utilities_ext_form",t=PolyForm.getEntries(e),a=!0;return t.name.trim()?A.value.name=null:(A.value.name=poly_utilities_settings.lang.projects.validate.name,a=!1),a}function fetchDataProjectsNameTemplate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((function(n,i){e.ajax({url:"".concat(admin_url,"poly_utilities/get_project_name_patterns"),type:"GET",data:{page:t,items_per_page:a},dataType:"json",success:function success(e){n(e)},error:function error(e,t,a){i(a)}})}))}var t,a,i,r,l,u,s,c,d=n([]),f=n([]),p=n(!1),y=n(!1),m=n(!1),v=n(!1),_=n(1),h=n(1),g=n(""),P=n(10),b="#poly_utilities_ext_modal",A=n({name:null,note:null,active:!0});return o((function(){initData()})),t=function resetValidationFields(){A.value.name=null,A.value.note=null},a=function resetFields(){t(),f.value=[]},i=function handleAdd(){y.value=!1,a(),f.value=[],e("".concat(b)).modal("show")},r=function handleEdit(t){y.value=!0,f.value=t,e("".concat(b)).modal("show")},l=function handleSubmit(t){var a,n;if(v.value=!0,!validationForm())return v.value=!1,!1;a=e("#poly_utilities_ext_form").get(0),n=new FormData(a),PolyHandleRequest.customFetch(a.action,{method:"POST",body:n}).then((function(e){if(e.ok)return e.json();throw new Error("Network response was not ok.")})).then((function(e){200===e.code?""!=f.value?(PolyMessage.displayNotification("success",e.message),initData()):(window.location.reload(),PolyMessage.displayNotification("success",e.message)):PolyMessage.displayNotification("error",e.message)})).catch((function(e){PolyMessage.displayNotification("error","There was a problem with the fetch operation.")})).finally((function(){v.value=!1}))},{handle_item:f,validation_fields:A,is_edit:y,isUpdateProccessing:v,dataLoaded:p,isProccessing:m,handleAdd:i,handleEdit:r,handleDelete:s=function handleDelete(t){var a="".concat(admin_url,"poly_utilities/delete_project_name_pattern/").concat(t.id);PolyPopup.confirm().then((function(t){t&&e.post(a).done((function(e){initData()}))}))},handleActiveStatus:c=function handleActiveStatus(t){var a,n="".concat(admin_url,"poly_utilities/update_pattern_status");t.active=1==t.active?0:1,a={active:t.active,id:t.id},e.post(n,a).done((function(e){PolyMessage.displayNotification(e.status,e.message),initData()})).fail((function(e,t,a){PolyMessage.displayNotification("error","There was a problem updating the status.")}))},handleSubmit:l,changePage:u=function changePage(e){h.value=e,initData(),PolyOperationFunctions.Scrolling(".dataTables_wrapper")},dataInfo:g,totalPages:_,currentPage:h,itemsPerPage:P,data_project_name_patterns:d}}}).mount("#polyApp")}(jQuery)}))})();