!function(o){"use strict";function cloneAndRemoveEvents(){var o,t,e,i,l,n;PolyOperationFunctions.Scrolling(),window.location.href.includes("admin/poly_utilities/support")&&((t=document.querySelectorAll(".poly-element.support")).forEach((function(o){var t,e,i=o.querySelectorAll(".line");i.forEach((function(o){o.remove()})),(t=o.querySelectorAll(".prompt")).forEach((function(o){o.remove()})),e=o.cloneNode(!0),o.parentNode.replaceChild(e,o)})),e=document.getElementById("poly_aio_supports_icon_bottom"),i=document.getElementById("poly_aio_supports_icon_right"),l={icon_right:PolyCommon.calculatePercentage(10),icon_bottom:PolyCommon.calculatePercentage(60,"height")},n=(null===(o=poly_utilities_settings)||void 0===o?void 0:o.aio_supports)||l,PolyDragElements.initializeDrag(".poly-element.support",{unit:"%",wrapperStyle:{border:"1px dashed #FC0000",padding:"0% 1%",zIndex:99999},right:n.icon_right,bottom:n.icon_bottom,callback:function callback(o){void 0!==o.top?(e.value="".concat(o.top),i.value="".concat(o.left)):void 0!==o.bottom&&(e.value="".concat(o.bottom),i.value="".concat(o.right))}}))}function updateDataFields(){var t,e,i=[];o(".poly-field-template.active").each((function(){var t=o(this).find(".poly_aio_supports_icon").val(),e=o(this).find(".poly_aio_supports_types").val(),l=t,n=o(this).find(".poly_aio_supports_icon_color").val(),a=o(this).find(".poly_aio_supports_title").val(),s=o(this).find(".poly_aio_supports_content").val();i.push({type:e,icon:l,icon_color:n,title:a,content:s})})),t={is_admin:o("#poly_aio_support_is_admin").prop("checked"),is_clients:o("#poly_aio_support_is_clients").prop("checked"),is_messages:o("#poly_aio_is_supports_messages").prop("checked"),is_messages_mobile:o("#poly_aio_is_supports_messages_mobile").prop("checked"),icon_right:o(".poly_aio_supports_icon_right").val(),icon_bottom:o(".poly_aio_supports_icon_bottom").val(),icon_button:o(".poly_aio_supports_icon_button").val(),icon_button_color:o(".poly_aio_supports_icon_button_color").val(),messages:o("#poly_aio_supports_messages").val().split("\n").map((function(o){return o.trim()})).filter(Boolean),supports:JSON.stringify(i)},(e=o(".poly_aio_supports-form")).valid()&&o.post(admin_url+"poly_utilities/save_aio_supports",{data:t}).done((function(o){var t=o;t.title="Alert",PolyMessage.displayNotification(t.status,t.message)}))}PolyOperationFunctions.DisableReload(),PolyUtilities.addBackdrop(".poly-utilities-aio-icon-select-position",{zIndex:9999,isCloseReload:!0,tooltip:"Drag and move the All-in-One icon to set its display position on the page. Then close it to update the new position. Please make sure the 'Enable for Admin area?' option is enabled to view the icon and change its position.",backgroundColor:"rgba(0, 0, 0, 0.8)"},cloneAndRemoveEvents,updateDataFields),o(".poly-utilities-aio-icon-select-position-reset").on("click",(function(){PolyPopup.confirm(poly_utilities_settings.lang.message_confirm_reset_position_button).then((function(t){t&&(o("#poly_aio_supports_icon_right").val(""),o("#poly_aio_supports_icon_bottom").val(""),updateDataFields(),setTimeout((function(){window.location.reload()}),1e3))}))})),PolyOperationFunctions.Icons(o(".poly-utilities-aio-icon-select")),o("#add-field").on("click",(function(){var t=o(".poly-fields-template .poly-field-template").clone().addClass("active"),e=PolyCommon.generateUniqueID(),i=t.find(".poly-utilities-aio-icon-select"),l=t.find(".poly-aio-handle-delete");t.attr("id",e),l.attr("data-id",e),i.attr("data-id",e),o("#repeater-fields").append(t).promise().done((function(){appColorPicker(),PolyOperationFunctions.Icons(o(".poly-utilities-aio-icon-select"))}))})),o("#repeater-fields").on("click",".poly-aio-handle-delete",(function(){var t=this;Swal.fire({title:poly_utilities_settings.popup_delete.header,text:poly_utilities_settings.popup_delete.message,showCancelButton:!0,confirmButtonColor:poly_utilities_settings.popup_delete.confirm_color,cancelButtonColor:poly_utilities_settings.popup_delete.cancel_color,cancelButtonText:poly_utilities_settings.popup_delete.cancel,confirmButtonText:poly_utilities_settings.popup_delete.confirm,allowOutsideClick:!1}).then((function(e){e.isConfirmed&&(o("#".concat(o(t).data("id"))).remove(),updateDataFields())}))})),Sortable.create(o("#repeater-fields").get(0),{handle:".poly-aio-handle-sortable",selectedClass:"selected",animation:150,onEnd:function onEnd(o){updateDataFields()}}),o(".poly_aio_is_supports").on("click",(function(){updateDataFields()})),o(".btn-submit-poly-aio-supports").on("click",(function(){updateDataFields()}))}(jQuery);